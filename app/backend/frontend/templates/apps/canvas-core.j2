<style>
  body { display: flex; flex-direction: column; align-items: center; font-family: sans-serif; margin: 20px; }
  canvas { border: 1px solid #ccc; cursor: none; }
  .toolbar {
      display: flex;
      flex-direction: row;
      padding: 5px;
      gap: 3px;
  }
  #brushPreview {
    position: absolute;
    pointer-events: none;
    border: 2px solid black;
    border-radius: 50%;
    background: rgba(0,0,0,0.1);
    transform: translate(-50%, -50%);
  }
  .floating {
    position: absolute;
    z-index: 2000;
    background-color: #f1f1f1;
    border: 1px solid #d3d3d3;
    text-align: center;
  }
  .float-controller {
    padding: 10px;
    cursor: move;
    background-color: #2196F3;
    color: white;
    user-select: none; /* prevent text selection while dragging */
  }
</style>

    <div class="floating" id="controls">
      <div class="float-controller" id="move">♥ Click here to move ♥</div>
      <div class="toolbar">
        <label>Color: <input type="color" id="colorPicker" value="#000000" /></label>
        <label>Brush Size: <input type="range" id="brushSize" min="1" max="50" value="5" /></label>
        <button id="eraserBtn">Eraser</button>
        <button id="clearBtn">Clear</button>
      </div>
    </div>
<canvas id="canvas" width="800" height="500"></canvas>
<div id="brushPreview"></div>

<script>
    dragElement(document.getElementById("controls"));

    function dragElement(element) {
      let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
      const header = document.getElementById("move");
      if (header) {
        header.onmousedown = dragMouseDown;
      } else {
        element.onmousedown = dragMouseDown;
      }

      function dragMouseDown(e) {
        e.preventDefault();
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onmouseup = closeDragElement;
        document.onmousemove = elementDrag;
      }

      function elementDrag(e) {
        e.preventDefault();
        pos1 = pos3 - e.clientX;
        pos2 = pos4 - e.clientY;
        pos3 = e.clientX;
        pos4 = e.clientY;
        element.style.top = (element.offsetTop - pos2) + "px";
        element.style.left = (element.offsetLeft - pos1) + "px";
      }

      function closeDragElement() {
        document.onmouseup = null;
        document.onmousemove = null;
      }
    }
</script>

<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const colorPicker = document.getElementById('colorPicker');
  const brushSize = document.getElementById('brushSize');
  const eraserBtn = document.getElementById('eraserBtn');
  const clearBtn = document.getElementById('clearBtn');
  const brushPreview = document.getElementById('brushPreview');

  let isDrawing = false;
  let currentColor = colorPicker.value;
  let currentSize = brushSize.value;
  let isEraser = false;

  canvas.addEventListener('mousedown', e => {
    isDrawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
  });

  canvas.addEventListener('mouseup', () => {
    isDrawing = false;
    ctx.closePath();
  });

  canvas.addEventListener('mouseout', () => {
    isDrawing = false;
  });

  canvas.addEventListener('mousemove', e => {
    // Update brush preview position and size
    brushPreview.style.left = e.pageX + 'px';
    brushPreview.style.top = e.pageY + 'px';
    brushPreview.style.width = currentSize + 'px';
    brushPreview.style.height = currentSize + 'px';
    brushPreview.style.borderColor = isEraser ? 'white' : currentColor;

    if (!isDrawing) return;

    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';
    ctx.lineWidth = currentSize;
    ctx.strokeStyle = isEraser ? 'white' : currentColor;
    ctx.stroke();
  });

  colorPicker.addEventListener('input', e => {
    currentColor = e.target.value;
    if (!isEraser) brushPreview.style.borderColor = currentColor;
  });

  brushSize.addEventListener('input', e => {
    currentSize = e.target.value;
  });

  eraserBtn.addEventListener('click', () => {
    isEraser = !isEraser;
    if (isEraser) {
        eraserBtn.innerHTML = "Brush"
    } else {
        eraserBtn.innerHTML = "Eraser"
    }

  });

  clearBtn.addEventListener('click', () => {
    ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight)
  });

  // Initialize brush preview size and color
  brushPreview.style.width = currentSize + 'px';
  brushPreview.style.height = currentSize + 'px';
  brushPreview.style.borderColor = currentColor;
</script>